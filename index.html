<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G2SF1ZG7ER"></script>
<script>
Â Â window.dataLayer = window.dataLayer || [];
Â Â function gtag(){dataLayer.push(arguments);}
Â Â gtag('js', new Date());

Â Â // Replace G-XXXXXXXXXX with your actual ID from Step 2
Â Â gtag('config', 'G-G2SF1ZG7ER'); 
</script>

    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy New Year 2026! ðŸŽ† (Open Surprise)</title>
    <meta name="description" content="I sent you a special 3D surprise for New Year 2026. Open it now!">
    
    <!-- Meta Tags -->
    <meta property="og:title" content="ðŸŽ† Happy New Year 2026! Gift for You.">
    <meta property="og:description" content="Tap to open your special 3D New Year surprise.">
    <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/3656/3656986.png">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #FF0055;
            --gold: #FFD700;
            --cyan: #00F3FF;
            --glass: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; touch-action: manipulation; }

        body {
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at center, #1a0b2e 0%, #000000 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
            color: white;
            padding-bottom: 90px;
        }

        #canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }

        /* === TOP AD (320x50) === */
        .ad-top-wrapper {
            position: relative;
            z-index: 20;
            margin-top: 10px;
            width: 320px;
            height: 50px;
            background: rgba(255,255,255,0.05);
            border: 1px dashed rgba(255,255,255,0.2);
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #777;
            font-size: 10px;
        }

        /* === 3D GIFT BOX (INTRO) === */
        #intro-screen {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 15;
            background: rgba(0,0,0,0.92);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.6s ease;
        }

        .box-container {
            position: relative;
            width: 100px;
            height: 100px;
            cursor: pointer;
            transform-style: preserve-3d;
            perspective: 1000px;
            animation: float 3s ease-in-out infinite;
        }

        .box-body {
            width: 100px; height: 100px;
            background: var(--primary);
            position: absolute;
            bottom: 0;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 0 30px var(--primary);
        }
        
        .box-lid {
            width: 110px; height: 30px;
            background: #ff3377;
            position: absolute;
            top: -15px; left: -5px;
            border-radius: 5px;
            transform-origin: top;
            transition: transform 0.5s ease;
            z-index: 2;
        }

        .ribbon-vertical { width: 20px; height: 100%; background: var(--gold); margin: 0 auto; }
        .ribbon-horizontal { width: 100%; height: 20px; background: var(--gold); position: absolute; top: 40%; }
        
        .box-container.open .box-lid { transform: rotateX(-120deg); }

        .tap-text {
            margin-top: 80px;
            color: var(--gold);
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: pulse 1s infinite;
        }

        /* === MAIN CARD === */
        #main-content {
            display: none; 
            width: 95%; max-width: 450px;
            z-index: 10;
            margin-top: 15px;
            animation: zoomIn 0.5s ease forwards;
        }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 25px;
            padding: 30px 20px;
            text-align: center;
            box-shadow: 0 0 40px rgba(0,0,0,0.5);
        }

        .year-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(180deg, #fff, #999);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 10px var(--primary));
            margin: 5px 0;
        }

        /* COUNTDOWN */
        .countdown-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 15px 0;
        }
        .time-box {
            background: rgba(0,0,0,0.3);
            padding: 8px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .t-val { font-family: 'Orbitron', sans-serif; font-size: 1.2rem; color: var(--gold); }
        .t-label { font-size: 0.6rem; color: #aaa; text-transform: uppercase; }

        /* SENDER NAME */
        .from-label { font-size: 0.9rem; color: #ccc; margin-top: 15px; }
        .sender-name {
            font-size: 2rem; color: var(--cyan); font-weight: 800;
            text-shadow: 0 0 15px rgba(0, 243, 255, 0.5);
            margin: 5px 0 20px 0;
            min-height: 40px;
        }
        .cursor { display: inline-block; width: 2px; height: 1em; background: var(--cyan); animation: blink 1s infinite; }

        .message {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 12px;
            border-left: 4px solid var(--primary);
            text-align: left;
            font-size: 1rem;
            line-height: 1.5;
            color: #eee;
            margin-bottom: 20px;
        }

        /* FORM & BUTTONS */
        .input-area {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        input {
            width: 100%; padding: 14px;
            border-radius: 50px; border: 2px solid #444;
            background: #1a0b2e; color: white;
            text-align: center; font-size: 1.1rem;
            outline: none; margin-bottom: 15px;
            transition: 0.3s;
        }
        input:focus { border-color: var(--gold); }

        .btn {
            display: flex; align-items: center; justify-content: center;
            width: 100%; padding: 14px;
            border-radius: 50px; font-weight: 700;
            text-transform: uppercase; border: none;
            cursor: pointer; font-size: 0.95rem;
            gap: 10px; margin-bottom: 10px;
            transition: transform 0.2s; text-decoration: none; color: white;
        }
        .btn:active { transform: scale(0.96); }

        .btn-create { background: linear-gradient(90deg, #FF0055, #FF5588); box-shadow: 0 5px 0 #990033; }
        .btn-wa { background: #25D366; box-shadow: 0 4px 0 #128C7E; }
        .btn-insta { background: linear-gradient(45deg, #405DE6, #C13584, #FD1D1D); }
        .btn-snap { background: #FFFC00; color: #000; }
        .btn-copy { background: #333; color: #ccc; font-size: 0.8rem; padding: 10px; }

        /* FOOTER AD */
        .footer-ad-container {
            margin-top: 25px;
            display: flex; flex-direction: column; align-items: center; width: 100%;
        }
        .native-ad {
            width: 300px; height: 250px;
            background: rgba(255,255,255,0.03);
            border: 1px dashed #444;
            display: flex; justify-content: center; align-items: center;
            color: #666; font-size: 12px;
            border-radius: 12px; margin-bottom: 10px;
        }

        /* Sound Toggle */
        .sound-btn {
            position: fixed; top: 15px; right: 15px;
            width: 35px; height: 35px;
            border-radius: 50%; background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: white; display: flex; justify-content: center; align-items: center;
            cursor: pointer; z-index: 50;
        }

        /* Toast */
        #toast {
            visibility: hidden; min-width: 250px; background-color: var(--gold); color: #000;
            text-align: center; border-radius: 50px; padding: 16px; position: fixed; z-index: 100;
            left: 50%; bottom: 30px; transform: translateX(-50%); font-weight: bold;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
        }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }

        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        @keyframes pulse { 0% { opacity: 0.6; } 100% { opacity: 1; } }
        @keyframes blink { 50% { opacity: 0; } }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }
        
        .hidden { display: none !important; }
        footer { font-size: 0.8rem; color: #777; text-align: center; }

    </style>
</head>
<body>

    <canvas id="canvas"></canvas>
    <div id="toast"><i class="fas fa-check-circle"></i> Link Copied!</div>

    <!-- Audio Control -->
    <div class="sound-btn" onclick="toggleSound()">
        <i class="fas fa-volume-up" id="sound-icon"></i>
    </div>
    
    <!-- ADSTERRA TOP BANNER -->
    <div class="ad-top-wrapper">
        <!-- PUT 320x50 SCRIPT HERE -->
        <script>
  atOptions = {
    'key' : '15aa1209222209890f6535c93ced9e92',
    'format' : 'iframe',
    'height' : 50,
    'width' : 320,
    'params' : {}
  };
</script>
<script src="https://www.highperformanceformat.com/15aa1209222209890f6535c93ced9e92/invoke.js"></script>
    </div>

    <!-- INTRO GIFT -->
    <div id="intro-screen" onclick="openGift()">
        <div class="box-container" id="gift-box">
            <div class="box-lid"><div class="ribbon-vertical"></div></div>
            <div class="box-body"><div class="ribbon-vertical"></div><div class="ribbon-horizontal"></div></div>
        </div>
        <div class="tap-text">Tap to Open Gift</div>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main-content">
        <div class="glass-card">
            <div style="font-size:0.8rem; color:#aaa; letter-spacing:2px; margin-bottom:5px;">HAPPY NEW YEAR</div>
            <div class="year-title">2026</div>

            <div class="countdown-grid">
                <div class="time-box"><div class="t-val" id="d">0</div><div class="t-label">Days</div></div>
                <div class="time-box"><div class="t-val" id="h">0</div><div class="t-label">Hrs</div></div>
                <div class="time-box"><div class="t-val" id="m">0</div><div class="t-label">Min</div></div>
                <div class="time-box"><div class="t-val" id="s">0</div><div class="t-label">Sec</div></div>
            </div>

            <div class="from-label">Special Wishes From</div>
            <div class="sender-name"><span id="type-name"></span><span class="cursor"></span></div>

            <div class="message">
                "As we count down to 2026, I wanted to tell you: <br><br>
                <strong>You are special to me.</strong> ðŸŒŸ<br>
                Happy New Year in advance! ðŸŽ‰ I hope the coming year brings you good health ðŸ’ª, clarity ðŸ§ , and real growth ðŸ“ˆ â€” not just resolutions that fade after a week ðŸ˜‰.
            </div>

            <p style="font-size:0.8rem; color:#888;">(Tap anywhere for fireworks & sounds! ðŸ’¥)</p>

            <div id="maker-view" class="input-area">
                <input type="text" id="name-input" placeholder="Enter Your Name..." maxlength="25">
                <button class="btn btn-create" onclick="generateLink()">ðŸ‘‰ Send 2026 Wishes</button>
            </div>

            <div id="share-view" class="input-area hidden">
                <p style="color:#25D366; font-weight:bold; margin-bottom:15px;">Link Ready! Share Now:</p>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
    
    <!-- WhatsApp: Tracks as 'WhatsApp' -->
    <a href="#" id="wa-btn" class="btn btn-wa" target="_blank" style="grid-column:span 2;" 
       onclick="gtag('event', 'share', {'method': 'WhatsApp', 'content_type': 'link'});">
        <i class="fab fa-whatsapp"></i> WhatsApp
    </a>

    <!-- Instagram: Tracks as 'Instagram' -->
    <button class="btn btn-insta" 
            onclick="shareNative('Instagram'); gtag('event', 'share', {'method': 'Instagram', 'content_type': 'link'});">
        <i class="fab fa-instagram"></i> Instagram
    </button>

    <!-- Snapchat: Tracks as 'Snapchat' -->
    <button class="btn btn-snap" 
            onclick="shareNative('Snapchat'); gtag('event', 'share', {'method': 'Snapchat', 'content_type': 'link'});">
        <i class="fab fa-snapchat-ghost"></i> Snapchat
    </button>

    <!-- Copy Link: Tracks as 'Copy Link' -->
    <button class="btn btn-copy" style="grid-column:span 2;" 
            onclick="copyLink(); gtag('event', 'share', {'method': 'Copy Link', 'content_type': 'link'});">
        <i class="fas fa-link"></i> Copy Link
    </button>

                </div>
                <button onclick="resetApp()" style="background:none; border:none; color:#888; text-decoration:underline; cursor:pointer; margin-top:15px;">Create Another</button>
            </div>
        </div>

        <div class="footer-ad-container">
            <div class="native-ad">
                <!-- PUT 300x250 SCRIPT HERE -->
                <script async="async" data-cfasync="false" src="https://pl28337395.effectivegatecpm.com/108a4d7c36c1270bb43ad1cbee414143/invoke.js"></script>
<div id="container-108a4d7c36c1270bb43ad1cbee414143"></div>
            </div>
            <footer>&copy; 2026 Happy New Year</footer>
        </div>
    </div>

    <!-- SOCIAL BAR AD -->
    <!-- PUT SOCIAL BAR SCRIPT HERE -->
    <script src="https://pl28337379.effectivegatecpm.com/fb/12/d7/fb12d7fc2042b962852916091d03091e.js"></script>

    <script>
        const targetDate = new Date("Jan 1, 2026 00:00:00").getTime();
        const urlParams = new URLSearchParams(window.location.search);
        const nameParam = urlParams.get('name');
        let giftOpened = false;
        let isMuted = false;
        let finalName = nameParam ? decodeURIComponent(nameParam).replace(/\+/g, ' ') : "A Friend";

        // --- AUDIO ENGINE ---
        // 1. Background Loop (Fireworks Ambience)
        const bgAudio = new Audio('https://cdn.pixabay.com/audio/2022/01/18/audio_d0a13f69d2.mp3');
        bgAudio.loop = true;
        bgAudio.volume = 0.4;

        // 2. Sound Effects Array (Different sounds)
        const fxSounds = [
            'https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3', // Pop
            'https://cdn.pixabay.com/audio/2022/03/15/audio_7368819549.mp3',   // Whistle
            'https://cdn.pixabay.com/audio/2022/03/10/audio_c8c8a73467.mp3'    // Bang
        ];

        function playRandomFx() {
            if(isMuted) return;
            const src = fxSounds[Math.floor(Math.random() * fxSounds.length)];
            const audio = new Audio(src);
            audio.volume = 0.6;
            audio.play().catch(e=>{});
        }

        function toggleSound() {
            isMuted = !isMuted;
            const icon = document.getElementById('sound-icon');
            if(isMuted) {
                icon.className = "fas fa-volume-mute";
                bgAudio.pause();
            } else {
                icon.className = "fas fa-volume-up";
                if(giftOpened) bgAudio.play().catch(e=>{});
            }
        }

        // --- COUNTDOWN ---
        function updateTimer() {
            const now = new Date().getTime();
            const gap = targetDate - now;
            if (gap > 0) {
                document.getElementById("d").innerText = Math.floor(gap / (1000 * 60 * 60 * 24));
                document.getElementById("h").innerText = Math.floor((gap % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                document.getElementById("m").innerText = Math.floor((gap % (1000 * 60 * 60)) / (1000 * 60));
                document.getElementById("s").innerText = Math.floor((gap % (1000 * 60)) / 1000);
            } else {
                document.querySelector('.countdown-grid').innerHTML = "<div style='grid-column:span 4; color:var(--gold); font-size:1.5rem; font-weight:bold;'>HAPPY NEW YEAR! ðŸŽ†</div>";
            }
        }
        setInterval(updateTimer, 1000); updateTimer();

        // --- APP LOGIC ---
        function openGift() {
            if(giftOpened) return;
            giftOpened = true;

            // --- ADD THIS LINE FOR ANALYTICS ---
    gtag('event', 'gift_opened', {
        'event_category': 'interaction',
        'event_label': '3D Box Opened'
    });
    // -----------------------------------

            
            document.getElementById('gift-box').classList.add('open');
            
            if(!isMuted) bgAudio.play().catch(e=>{});
            playRandomFx(); // Initial pop
            createExplosion(window.innerWidth/2, window.innerHeight/2, 100);

            setTimeout(() => {
                document.getElementById('intro-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('intro-screen').style.display = 'none';
                    document.getElementById('main-content').style.display = 'block';
                    typeWriter(finalName, 0);
                }, 500);
            }, 800);
        }

        function typeWriter(text, i) {
            if (i < text.length) {
                document.getElementById("type-name").innerHTML += text.charAt(i);
                setTimeout(() => typeWriter(text, i + 1), 100);

                // --- ADD THIS LINE FOR ANALYTICS ---
    // This tracks that a wish was generated
    gtag('event', 'wish_generated', {
        'event_category': 'engagement',
        'sender_name': name // WARNING: Google technically discourages sending real names (PII), but many viral scripts do it.
    });
    // -----------------------------------

                
            } else {
                document.querySelector(".cursor").style.opacity = "0";
            }
        }

        function generateLink() {
            const name = document.getElementById('name-input').value.trim();
            if(!name) { alert("Please type your name! ðŸŽ"); return; }
            const link = `${window.location.protocol}//${window.location.host}${window.location.pathname}?name=${encodeURIComponent(name)}`;
            
            const msg = `*${name}* sent you a 2026 New Year Surprise! ðŸŽ†âœ¨%0A%0AOpen your 3D gift here ðŸ‘‡%0A${link}`;
            document.getElementById('wa-btn').href = `https://api.whatsapp.com/send?text=${msg}`;
            
            window.shareUrl = link; window.shareName = name;
            document.getElementById('maker-view').classList.add('hidden');
            document.getElementById('share-view').classList.remove('hidden');
            document.getElementById("type-name").innerHTML = name;
            playRandomFx();
            createExplosion(window.innerWidth/2, window.innerHeight/2, 50);
        }

        async function shareNative(platform) {
            const shareData = {
                title: 'Happy New Year 2026 ðŸŽ†',
                text: `${window.shareName || finalName} sent you a special 3D Surprise!`,
                url: window.shareUrl || window.location.href
            };
            if (navigator.share) {
                try { await navigator.share(shareData); } catch (e) {}
            } else {
                copyLink();
                alert(`Opening ${platform}...\nLink Copied! ðŸ“‹`);
            }
        }

        function copyLink() {
            const url = window.shareUrl || window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                const toast = document.getElementById("toast");
                toast.className = "show";
                setTimeout(() => toast.className = toast.className.replace("show", ""), 3000);
            });
        }

        function resetApp() {
            document.getElementById('maker-view').classList.remove('hidden');
            document.getElementById('share-view').classList.add('hidden');
            document.getElementById('name-input').value = "";
        }

        // --- FIREWORKS ---
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        document.addEventListener('mousedown', e => {
            if(!e.target.closest('input') && !e.target.closest('button') && !e.target.closest('a')) {
                createExplosion(e.clientX, e.clientY, 30);
                playRandomFx(); // Play random sound on click
            }
        });
        
        class Particle {
            constructor(x, y, color) {
                this.x = x; this.y = y; this.color = color;
                const angle = Math.random() * Math.PI * 2;
                const v = Math.random() * 6 + 2;
                this.vx = Math.cos(angle) * v; this.vy = Math.sin(angle) * v;
                this.alpha = 1; this.life = 100;
            }
            update() {
                this.vx *= 0.95; this.vy *= 0.95; this.vy += 0.15;
                this.x += this.vx; this.y += this.vy; this.alpha -= 0.015; this.life--;
            }
            draw() {
                ctx.save(); ctx.globalAlpha = this.alpha; ctx.fillStyle = this.color;
                ctx.beginPath(); ctx.arc(this.x, this.y, Math.random()*3+1, 0, Math.PI*2); ctx.fill(); ctx.restore();
            }
        }

        function createExplosion(x, y, count) {
            const colors = ['#FFD700', '#00F3FF', '#FF0055', '#FFFFFF'];
            for(let i=0; i<count; i++) particles.push(new Particle(x, y, colors[Math.floor(Math.random()*colors.length)]));
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for(let i=0; i<particles.length; i++) {
                particles[i].update(); particles[i].draw();
                if(particles[i].life <= 0) { particles.splice(i, 1); i--; }
            }
            requestAnimationFrame(animate);
        }
        animate();

        setInterval(() => {
            if(giftOpened && document.visibilityState === 'visible') {
                createExplosion(Math.random()*canvas.width, Math.random()*canvas.height*0.5, 20);
                // 1 in 4 chance to play random fx on auto firework
                if(Math.random() > 0.75) playRandomFx();
            }
        }, 2000);
    </script>
</body>
</html>
